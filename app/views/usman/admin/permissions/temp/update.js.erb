<% if @permission.errors.blank? %>
  
  // Updating the edited row and highlighting it
  $('#tr_permission_<%= @permission.id %>').replaceWith("<%= escape_javascript(render(:partial=>'/usman/admin/permissions/row', locals: {permission: @permission})) %>");
  $("#tr_permission_<%= @permission.id %>").css("background-color", "#fffddd");
  
  // Showing the saved data in the modal
  var heading = "<%= raw @permission.name %>";
  var bodyContent = "<%= escape_javascript(render(:partial=>'/usman/admin/permissions/show')) %>";
  showLargeModal(heading, bodyContent, false);

  // Showing Growl Like Message
  notifySuccess("<%= @notification[:title] %>", "<%= @notification[:message] %>");

<% else %>

  // Reload the form with errors
  var heading = "Edit Permission";
  var bodyContent = "<%= escape_javascript(render(:partial=>'/usman/admin/permissions/form')) %>";
  showLargeModal(heading, bodyContent);

  // Show Main Error Message on the form
  <% error_message = content_tag(:div, I18n.t('errors.errors_highlighted'), class: "alert alert-danger mt-20") %>
  $("#permission_form_error").html("<%= escape_javascript(error_message) %>");
  
  // Showing Growl Like Message
  notifyError("<%= escape_javascript(@notification[:title]) %>", "<%= escape_javascript(raw(@notification[:message])) %>");
  
<% end %>
