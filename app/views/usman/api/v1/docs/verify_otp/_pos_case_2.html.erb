<%

api_title = "Positive Case - 2 - should verify the otp if the device is verified, tac is accpted and return the api token"

api_input = <<-eos
Example:

POST #{request.base_url}/api/v1/verify_otp
{
  "otp": "11111",
  "uuid": "<REGISTERED UUID>",
  "mobile_number": "<REGISTERED MOBILE NUMBER>",
  "dialing_prefix": "+91"
}
eos

api_output = <<-eos
{
  "success": true,
  "alert": {
      "heading": "OTP was verified succesfully",
      "message": "You may need to accept the terms and conditions to get the API token if you have not yet finished the registration"
  },
    "data": {
        "api_token": "67d9f2430759eb304e1e64fa01a7829e",
        "registration": {
            "id": 165,
            "dialing_prefix": "+97",
            "mobile_number": "1501370320",
            "status": "verified",
            "user_id": 19,
            "country_id": 235,
            "city_id": 21,
            "user": {
                "id": 19,
                "name": "Mickey Mouse ",
                "gender": "male",
                "date_of_birth": "10-10-1983",
                "username": "342721f3",
                "email": "mickey@dondealapps.com",
                "phone": "",
                "dummy": false
            },
            "country": {
                "id": 235,
                "name": "United Arab Emirates",
                "iso_name": "UNITED ARAB EMIRATES",
                "iso_alpha_2": "AE",
                "dialing_prefix": "971",
                "priority": 1000,
                "operational": true
            },
            "city": {
                "id": 21,
                "name": "Abu Dhabi",
                "priority": 1000,
                "operational": true
            }
        },
        "profile": {
            "id": 19,
            "name": "Mickey Mouse ",
            "gender": "male",
            "date_of_birth": "10-10-1983",
            "username": "342721f3",
            "email": "mickey@dondealapps.com",
            "phone": "",
            "dummy": false,
            "profile_picture": {
                "id": 60,
                "created_at": "26-09-2017 01:05:15",
                "profile_id": 19,
                "image_large_path": "/uploads/profile_pictures/60/large_micky.jpg",
                "image_small_path": "/uploads/profile_pictures/60/small_micky.jpg"
            }
        }
    }
}
eos

%>

<%= render partial: "kuppayam/api/docs/example", locals: {
                                        negative_case: false,
                                        example_id: "pos_case_2",
                                        api_title: api_title,
                                        api_input: api_input,
                                        api_output: api_output 
                                      } %>