<% status_hash = {published: "success", unpublished: "default", disabled: "danger"} %>

<div class="media <%= status_hash[@device.status.to_sym] %>">

  <div class="pull-left ml-10" style="width:65%;">

  	<h1><%= @device.display_name %></h1>
    
    <span class="ml-5 mt-5 label label-<%= status_hash[@device.status.to_sym] %>"><%= @device.status.titleize %></span>

    <%= clear_tag %>
  </div>

</div>

<h4 class="mb-20">Technical Details</h4>

<div class="table-responsive mb-50"> 
	<table class="table table-striped table-condensed table-bordered"> 
		<tbody>

      <tr><th>Operating System</th><td><%= @device.operating_system %></td></tr>
      <tr><th>Software Version</th><td><%= @device.software_version %></td></tr>

      <tr><th>Last Accesssed API</th><td><%= @device.last_accessed_api %></td></tr>
      <tr><th>Last Accessed At</th><td><%= @device.last_accessed_at.strftime("%m/%d/%Y - %H:%M:%S") if @device.last_accessed_at %></td></tr>

      <% if @current_user.super_admin? %>
        <tr><th>OTP</th><td><%= @device.otp %></td></tr>
      <% else %>
        <tr><th>Device Token</th><td><%= @device.device_token %></td></tr>
      <% end %>
      <tr><th>OTP Sent At</th><td><%= @device.otp_sent_at.strftime("%m/%d/%Y - %H:%M:%S") if @device.otp_sent_at %></td></tr>

      <% if @current_user.super_admin? %>
        <tr><th>API Token</th><td><%= @device.api_token %></td></tr>
      <% end %>
      <tr><th>Token Created At</th><td><%= @device.token_created_at.strftime("%m/%d/%Y - %H:%M:%S") if @device.token_created_at %></td></tr>

			<tr><th>Created At</th><td><%= @device.created_at.strftime("%m/%d/%Y - %H:%M:%S") if @device.created_at %></td></tr>
			<tr><th>Updated At</th><td><%= @device.updated_at.strftime("%m/%d/%Y - %H:%M:%S") if @device.updated_at %></td></tr>
			
		</tbody>
	</table>
</div>

<div>
	<%= link_to raw("<i class=\"fa fa-close mr-5\"></i> <span>Close</span>"), "#", onclick: "closeGenericModal();", class: "btn btn-white pull-left" %>
</div>

<%= clear_tag %>